
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../s3_remote_state/">
      
      
        <link rel="next" href="../sagemaker_studio/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Optuna SageMaker Studio - Terraform Templates</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#optuna-with-sagemaker-studio" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Terraform Templates" class="md-header__button md-logo" aria-label="Terraform Templates" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Terraform Templates
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Optuna SageMaker Studio
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Terraform Templates" class="md-nav__button md-logo" aria-label="Terraform Templates" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Terraform Templates
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AWS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            AWS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../github_action_oidc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Github Action OIDC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3_remote_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3 Remote State
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Optuna SageMaker Studio
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Optuna SageMaker Studio
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lifecycle-script" class="md-nav__link">
    <span class="md-ellipsis">
      Lifecycle Script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-vpctf" class="md-nav__link">
    <span class="md-ellipsis">
      1. vpc.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-security_groupstf" class="md-nav__link">
    <span class="md-ellipsis">
      2. security_groups.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-secrets_managertf" class="md-nav__link">
    <span class="md-ellipsis">
      3. secrets_manager.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-sagemakertf" class="md-nav__link">
    <span class="md-ellipsis">
      4. sagemaker.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-s3tf" class="md-nav__link">
    <span class="md-ellipsis">
      5. s3.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-iamtf" class="md-nav__link">
    <span class="md-ellipsis">
      6. iam.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-ecrtf" class="md-nav__link">
    <span class="md-ellipsis">
      7. ecr.tf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-rdstf" class="md-nav__link">
    <span class="md-ellipsis">
      8. rds.tf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sagemaker_studio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sagemaker Studio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terraform_lockfile_cross_platform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cross-Platform Terraform Lockfile
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="optuna-with-sagemaker-studio">Optuna with SageMaker Studio</h1>
<p>Sets up an environment for running hyperparameter optimization (HPO) with <a href="https://github.com/optuna/optuna">Optuna</a> on Amazon SageMaker Studio.</p>
<p>The configuration files and scripts are adapted from an <a href="https://aws.amazon.com/blogs/machine-learning/implementing-hyperparameter-optimization-with-optuna-on-amazon-sagemaker/">AWS blog post</a> and its associated <a href="https://github.com/aws-samples/amazon-sagemaker-optuna-hpo-blog">GitHub repository</a>.</p>
<p>Additionally, it incorporates lifecycle script for setting up <code>sagemaker-code-editor</code> in SageMaker Studio.</p>
<h2 id="overview">Overview</h2>
<center>
<img src="../diagrams/optuna_sagemaker.png" alt="Optuna with SageMaker" width="80%"/>
</center>

<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="err">├──</span> <span class="n">backend</span><span class="o">.</span><span class="n">hcl</span><span class="o">-</span><span class="n">example</span>            <span class="c1"># Example configuration for Terraform backend</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="err">├──</span> <span class="n">ecr</span><span class="o">.</span><span class="n">tf</span>                         <span class="c1"># Creates an Elastic Container Registry for Docker images used for training, preprocessing, or serving</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="err">├──</span> <span class="n">iam</span><span class="o">.</span><span class="n">tf</span>                         <span class="c1"># IAM roles and policies for SageMaker and related services</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="err">├──</span> <span class="n">lifecycle_scripts</span>              <span class="c1"># Lifecycle scripts for installing and configuring code-server</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="err">│</span>   <span class="err">├──</span> <span class="n">install_codeserver</span><span class="o">.</span><span class="n">sh</span>      <span class="c1"># Script to install code-server</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="err">│</span>   <span class="err">└──</span> <span class="n">setup_codeserver</span><span class="o">.</span><span class="n">sh</span>        <span class="c1"># Script to configure code-server during startup</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="err">├──</span> <span class="n">main</span><span class="o">.</span><span class="n">tf</span>                        <span class="c1"># Main Terraform configuration file</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="err">├──</span> <span class="n">outputs</span><span class="o">.</span><span class="n">tf</span>                     <span class="c1"># Outputs for the Terraform module</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="err">├──</span> <span class="n">rds</span><span class="o">.</span><span class="n">tf</span>                         <span class="c1"># RDS configuration for databases</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="err">├──</span> <span class="n">s3</span><span class="o">.</span><span class="n">tf</span>                          <span class="c1"># S3 bucket configuration for storage</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="err">├──</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">tf</span>                   <span class="c1"># SageMaker configurations for running HPO</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="err">├──</span> <span class="n">secrets_manager</span><span class="o">.</span><span class="n">tf</span>             <span class="c1"># Secrets Manager for handling sensitive information</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="err">├──</span> <span class="n">security_groups</span><span class="o">.</span><span class="n">tf</span>             <span class="c1"># Security groups for network access</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="err">├──</span> <span class="n">variables</span><span class="o">.</span><span class="n">tf</span>                   <span class="c1"># Variable definitions</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="err">├──</span> <span class="n">variables</span><span class="o">.</span><span class="n">tfvars</span><span class="o">-</span><span class="n">example</span>       <span class="c1"># Example of variable values</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="err">└──</span> <span class="n">vpc</span><span class="o">.</span><span class="n">tf</span>                         <span class="c1"># VPC configuration</span>
</span></code></pre></div>
<hr />
<h2 id="lifecycle-script">Lifecycle Script</h2>
<p>This lifecycle script shows examples for the following:</p>
<p><strong>Installation</strong></p>
<ul>
<li>Tools into the <code>base</code> conda environment</li>
<li>Python dependency management tools <code>poetry</code>, <code>uv</code>, and <code>pdm</code></li>
<li>Extensions for <code>sagemaker-code-editor</code></li>
</ul>
<p><strong>Configuration</strong></p>
<ul>
<li>Configurations for <code>conda</code> and <code>git</code></li>
<li>Keyboard shortcuts and settings for <code>sagemaker-code-editor</code></li>
</ul>
<p><strong>References</strong></p>
<ul>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-add-external.html">External library and kernel installation</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/code-editor-use-lifecycle-configurations-extensions.html">Create a lifecycle configuration to install Code Editor extensions</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/code-editor.html">Code Editor in Amazon SageMaker Studio</a></li>
</ul>
<hr />
<h2 id="modules">Modules</h2>
<h3 id="1-vpctf">1. <strong><code>vpc.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>VPC</strong>: Defines a Virtual Private Cloud (VPC) for network isolation.</li>
<li><strong>Subnets</strong>: Creates public and private subnets for resource placement.</li>
<li><strong>Internet Gateway</strong>: Enables internet access for public subnets.</li>
<li><strong>NAT Gateways</strong>: Provides internet access for private subnets.</li>
<li><strong>Route Tables</strong>: Manages routing within the VPC for public and private subnets.</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>Other resources, such as RDS and SageMaker, rely on the VPC and its subnets for network configuration.</li>
<li>Security groups (from <code>security_groups.tf</code>) are tied to this VPC.</li>
</ul>
<hr />
<h3 id="2-security_groupstf">2. <strong><code>security_groups.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>SageMaker Security Group</strong>: Allows outbound internet access for SageMaker Studio.</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>Used by resources in <code>sagemaker.tf</code> for network access control.</li>
</ul>
<hr />
<h3 id="3-secrets_managertf">3. <strong><code>secrets_manager.tf</code></strong></h3>
<blockquote>
<p>Note: As of 2025, code repository integration is only supported for JupyterLab and JupyterServer apps, not the Code Editor in SageMaker Studio. Additionally, private repositories are not yet supported. Therefore, this secret remains unused in the current configuration. Repository must be cloned manually using this secret if needed.</p>
</blockquote>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>Secrets</strong>: Manages sensitive data such as:</li>
<li>GitHub Personal Access Token for SageMaker's code repository.</li>
<li>RDS credentials for database access.</li>
<li><strong>Random String/Password</strong>: Generates unique identifiers and secure passwords.</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>Secrets are referenced by the SageMaker code repository (<code>sagemaker.tf</code>) and RDS cluster (<code>rds.tf</code>).</li>
<li>RDS uses the credentials stored in Secrets Manager for secure access.</li>
</ul>
<hr />
<h3 id="4-sagemakertf">4. <strong><code>sagemaker.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>SageMaker Domain</strong>: Creates the Studio domain with IAM authentication and public internet access.</li>
<li><strong>User Profile</strong>: Configures a named user profile with specific execution roles and security settings.</li>
<li><strong>SageMaker Space</strong>: Sets up a "private" space within the domain.</li>
<li><strong>Lifecycle Configuration</strong>: Defines a Code Editor lifecycle configuration using the setup script.</li>
</ul>
<p><strong>Key Design:</strong></p>
<ul>
<li>Docker access is enabled for container development.</li>
<li>Code Editor app settings with specified instance types.</li>
<li>EBS storage configuration with default and maximum volume sizes.</li>
<li>Auto-mounting of EFS home directories.`</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>Depends on IAM roles (<code>iam.tf</code>), public subnets (<code>vpc.tf</code>), security groups (<code>security_groups.tf</code>), and Secrets Manager secrets (<code>secrets_manager.tf</code>).</li>
</ul>
<p><strong>References</strong></p>
<ul>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/gs-studio-onboard.html">Amazon SageMaker AI domain overview</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/domain-user-profile.html">Amazon SageMaker domain user profiles</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/remote-access.html">Connect your local Visual Studio Code to SageMaker spaces with remote access</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-updated-spaces.html">Amazon SageMaker Studio spaces</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-updated-automount.html">Amazon EFS auto-mounting in Studio</a></li>
</ul>
<hr />
<h3 id="5-s3tf">5. <strong><code>s3.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>S3 Bucket</strong>: Provides storage for datasets, artifacts, and outputs.</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>The IAM role (<code>iam.tf</code>) grants permissions to SageMaker Studio for accessing this bucket.</li>
</ul>
<hr />
<h3 id="6-iamtf">6. <strong><code>iam.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>SageMaker Execution Role</strong>: Creates an IAM role that SageMaker can assume to access AWS resources.</li>
<li><strong>Custom IAM Policies</strong>:</li>
<li><strong>S3 Policy</strong>: Grants full access to the specified S3 bucket.</li>
<li><strong>Remote Access Policy</strong>: Enables SageMaker <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/remote-access-remote-setup.html">remote access</a> feature.</li>
<li><strong>Policy Attachments</strong>: Attaches the following policies to the SageMaker execution role:</li>
<li><strong>S3 Policy</strong>: Grants access to the S3 bucket created in <code>s3.tf</code> and the external S3 bucket used for Terraform <a href="https://developer.hashicorp.com/terraform/language/state/remote">remote state</a></li>
<li><strong>Remote Access Policy</strong>: Grants <code>sagemaker:StartSession</code> permission to enable remote access to SageMaker Studio compute instances</li>
<li><code>AmazonSageMakerFullAccess</code> (AWS managed policy)</li>
<li><code>AmazonEC2ContainerRegistryFullAccess</code> (AWS managed policy)</li>
<li><code>SecretsManagerReadWrite</code> (AWS managed policy)</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>SageMaker Studio user assumes this execution role to interact with S3, ECR, Secrets Manager, and other AWS services.</li>
<li>The role is referenced in the SageMaker domain, user profiles, and for accessing S3 buckets.</li>
</ul>
<hr />
<h3 id="7-ecrtf">7. <strong><code>ecr.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>ECR Repository</strong>: Creates an Elastic container registry repository for storing Docker images.</li>
<li><strong>Lifecycle Policy</strong>: Configures automatic cleanup of images with two rules:</li>
<li>Retains only the most recent images tagged as "latest"</li>
<li>Expires untagged images after a specified number of days</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>The IAM role in <code>iam.tf</code> grants SageMaker permission to pull images from this repository.</li>
<li>Used to store custom training, processing, or inference images.</li>
</ul>
<hr />
<h3 id="8-rdstf">8. <strong><code>rds.tf</code></strong></h3>
<p><strong>Provisioned Resources:</strong></p>
<ul>
<li><strong>Subnet Group</strong>: Defines subnets where RDS instances are deployed.</li>
<li><strong>Parameter Groups</strong>: Configures database engine settings.</li>
<li><strong>RDS Cluster</strong>: Creates a database cluster for storing HPO results.</li>
<li><strong>RDS Instances</strong>: Adds instances to the database cluster for handling workloads.</li>
</ul>
<p><strong>Dependencies:</strong></p>
<ul>
<li>Depends on private subnets from <code>vpc.tf</code> for deployment.</li>
<li>Uses Secrets Manager credentials (<code>secrets_manager.tf</code>) for database access.</li>
<li>The security group (<code>security_groups.tf</code>) controls access between SageMaker and RDS.</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>